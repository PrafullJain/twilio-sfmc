<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/assets/styles/salesforce-lightning-design-system.css" />
    
 
    <script type="text/javascript">
        (function() {
            var config = {
                baseUrl: 'js'
            };

            var dependencies = [
                'customActivity'
            ];

            require(config, dependencies);
        })();
    </script>
    
    
    <style type="text/css">
        body {
            padding: 20px;
            margin: 0;
	    background-color: #ffffff;
        }
        .step {
            display: none;
        }
        #step1 {
            display: block;
        }
	html{
		background: #ffffff;
	    }
        
        
        
        .editor
        {
			border:solid 1px #ccc;
			padding: 20px;
			min-height:200px;
        }

        .sample-toolbar
        {
			border:solid 1px #ddd;
			background:#f4f4f4;
			padding: 5px;
			border-radius:3px;
        }

        .sample-toolbar > span
        {
			cursor:pointer;
		}

        .sample-toolbar > span:hover
        {
			text-decoration:underline;
		}
	
    </style>
</head>

	
	
<body>
<div id="step1" class="step">
	<div class="slds-text-heading_small instruction">Enter authentication values for twilio.</div>
        <br>
	<!-- enter twilio authentication details-->
        <div class="form-group">
            <div><label for="accountSID">Account SID:</label></div>
            <input class="form-control" id="accountSID" type="text" name="accountSID" value="">
        </div>
        <div class="form-group">
            <div><label for="authToken">Auth Token:</label></div>
            <input class="form-control" id="authToken" type="text" name="authToken" value="">
        </div> 
	
	
</div>


<div id="step2" class="step">
  <div class="slds-text-heading_small instruction">Select channels. The user will be sent messages on the channels you are selecting.</div>
  <br><br>

    
  <div class="slds-form-element">
  <div class="slds-form-element__control">
    <div class="slds-checkbox">
      <input type="checkbox" name="options" id="SMS" value=""  />
      <label class="slds-checkbox__label" for="SMS">
        <span class="slds-checkbox_faux"></span>
        <span class="slds-form-element__label">SMS</span>
      </label>
    </div>
    </div>
    </div>
 
	
	
	<div class="slds-form-element">
        <div class="slds-form-element__control">
        <div class="slds-checkbox">
         <input type="checkbox" name="options" id="WhatsApp" value="" />
          <label class="slds-checkbox__label" for="WhatsApp">
        <span class="slds-checkbox_faux"></span>
        <span class="slds-form-element__label">WhatsApp</span>
      </label>
      </div>
      </div>
      </div>    
</div>
	
	
	
<div id="step3" class="step">
<div class="slds-text-heading_small instruction">Create a message:</div>

    <br><br>
    <div class="sample-toolbar">
		<a href="javascript:void(0)" onclick="format('bold')"><span class="fa fa-bold fa-fw"></span></a>
		<a href="javascript:void(0)" onclick="format('italic')"><span class="fa fa-italic fa-fw"></span></a>
		<a href="javascript:void(0)" onclick="format('insertunorderedlist')"><span class="fa fa-list fa-fw"></span></a>
	        <a href="javascript:void(0)" onclick="format('cut')"><span class="fa fa-cut fa-fw"></span></a>
	        <a href="javascript:void(0)" onclick="format('underline')"><span class="fa fa-underline fa-fw"></span></a>
	        <a href="javascript:void(0)" onclick="format('strikeThrough')"><span class="fa fa-strikethrough fa-fw"></span></a>
	   	<a href="javascript:void(0)" onclick="format('justifyLeft')"><span class="fa fa-align-left fa-fw"></span></a>
		<a href="javascript:void(0)" onclick="format('justifyCenter')"><span class="fa fa-align-center fa-fw"></span></a>
		<a href="javascript:void(0)" onclick="format('justifyRight')"><span class="fa fa-align-right fa-fw"></span></a>
	    	<a href="javascript:void(0)" onclick="format('indent')"><span class="fa fa-indent fa-fw"></span></a>
	        <a href="javascript:void(0)" onclick="format('outdent')"><span class="fa fa-outdent fa-fw"></span></a>
	        <a href="javascript:void(0)" onclick="format('subscript')"><span class="fa fa-subscript fa-fw"></span></a>
	        <a href="javascript:void(0)" onclick="format('superscript')"><span class="fa fa-superscript fa-fw"></span></a>
	   	<a href="javascript:void(0)" onclick="format('undo')"><span class="fa fa-undo fa-fw"></span></a>
		<a href="javascript:void(0)" onclick="format('redo')"><span class="fa fa-redo fa-fw"></span></a>
		<a href="javascript:void(0)" onclick="format('insertUnorderedList')"><span class="fa fa-list-ul fa-fw"></span></a>
	        <a href="javascript:void(0)" onclick="format('insertOrderedList')"><span class="fa fa-list-ol fa-fw"></span></a>
	        <a href="javascript:void(0)" onclick="format('insertParagraph')"><span class="fa fa-paragraph fa-fw"></span></a>
	        <a href="javascript:void(0)" onclick="format('insertHorizontalRule')" title="insert Horizontal Rule">Horizontal Rule</a>
	    	<a href="javascript:void(0)" onclick="insertImage()"><span class="fa fa-image fa-fw"></span></a>
	    	<select onchange="execVal('fontName',this.value)">
			<option value="Arial">Arial</option>
			<option value="Comic Sans MS">Comic Sans MS</option>
			<option value="Courier">Courier</option>
			<option value="Georgia">Georgia</option>
			<option value="Tahoma">Tahoma</option>
			<option value="Times New Roman">Times New Roman</option>
			<option value="Verdana">Verdana</option>
		</select>
	    	<select onchange="execVal('fontSize',this.value)" title="font size">
			<option value="1">1</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5</option>
			<option value="6">6</option>
			<option value="7">7</option>
      		</select>
	       <div class="slds-form-element">
		  
		  <div class="slds-form-element__control">
		    <div class="slds-select_container">
		      <select class="slds-select" id="ps" onchange="Test()" onfocus="this.selectedIndex = -1;">
			
			<option value="{{Contact.Default.EmailAddress}}" id="ps1">Email</option>
			<option value="{{Contact.Attribute.TwilioV1.TwilioNumber}}" id="ps2">Phone number</option>
			
		      </select>
		    </div>
		  </div>
		</div>       
               </div>
	<!-- content editable div -->
         <div id="RichTextEditor" class="editor" contenteditable='true'>
	 </div>
<div id="image">
</div>
</div>

<script>
		
		function format(command, value) {
			document.execCommand(command, false, value);
		}
		function execVal(command, value) {
		       document.execCommand(command, false, value);
		}
		function Test() {
			var value = $("#ps").val();
			insertTextAtCaret(value);
			console.log('value------------------->' + value);
		      
		}
		
		function insertTextAtCaret(text) {
		    var sel, range;
		    if (window.getSelection) 
		    {
			    sel = window.getSelection();
			    console.log("selection----------------->" + sel); 
			    console.log("window.getSelection().anchorNode.parentNode.id----->" + window.getSelection().anchorNode.parentNode.id);
			    console.log("window.getSelection().anchorNode.id---------------->" + window.getSelection().anchorNode.id);
			    console.log("window.getSelection().id--------------------------->" + window.getSelection().id);
			    var parentID = window.getSelection().anchorNode.parentNode.id;
			    var anchorID = window.getSelection().anchorNode.id;
			   // if(parentID == 'RichTextEditor' || anchorID == 'RichTextEditor') 
			    //{
				    if (sel.getRangeAt && sel.rangeCount) 
				    {
					    range = sel.getRangeAt(0);
					    range.deleteContents();
					    range.insertNode( document.createTextNode(text) );
			   	    }
			  //}
		    } else if (document.selection && document.selection.createRange) {
			    console.log("I don't know what this is" + document.selection.createRange().text);
			document.selection.createRange().text = text;
			 console.log("Text-------->" + text);
		    }
		}

		/*function setTextToCurrentPos() { 
                var curPos = getCaretIndex('sampleeditor');	
			
                console.log("Cursor position ----------------------------->" + curPos); 
                let text_area_val = document.getElementById('sampleeditor').innerHTML ;
			console.log("Value of text_area_val is------------------------->" + text_area_val);
                let text_to_insert = $("#ps").val(); 
			console.log("Value of text_to_insert is------------------------->" + text_to_insert);
			document.getElementById('sampleeditor').innerHTML = text_area_val.slice(0, curPos) + text_to_insert + text_area_val.slice(curPos);
			console.log("Value inserted is ---------------------------->" + text_area_val.slice(0, curPos) + text_to_insert + text_area_val.slice(curPos));
               // $("#sampleeditor").val(x.slice(0, curPos) + text_to_insert + x.slice(curPos)); 
            } */
</script>	
</div>
	
	
<div id="step4" class="step">
<div class="slds-text-heading_small instruction">CHANNEL</div>
<div id="channel"> </div> 	
	
<br> <br>
 <div class="slds-text-heading_small instruction">MESSAGE BODY</div> 
 <div id="Message"></div> 
</div>
	
	
</body>
</html>
